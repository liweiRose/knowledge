<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化 | Summary of front-end knowledge system</title>
    <meta name="description" content="Knowledge summary">
    
    
    <link rel="preload" href="/knowledge/assets/css/styles.e7eda342.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.e7eda342.js" as="script"><link rel="preload" href="/knowledge/assets/js/34.a4d1a95b.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/1.6c5fe304.js"><link rel="prefetch" href="/knowledge/assets/js/10.e74c9817.js"><link rel="prefetch" href="/knowledge/assets/js/11.7735d178.js"><link rel="prefetch" href="/knowledge/assets/js/12.33e50b7d.js"><link rel="prefetch" href="/knowledge/assets/js/13.e7ec4d82.js"><link rel="prefetch" href="/knowledge/assets/js/14.76fe5404.js"><link rel="prefetch" href="/knowledge/assets/js/15.453f5da6.js"><link rel="prefetch" href="/knowledge/assets/js/16.3b970dca.js"><link rel="prefetch" href="/knowledge/assets/js/17.aa9abea6.js"><link rel="prefetch" href="/knowledge/assets/js/18.3a629017.js"><link rel="prefetch" href="/knowledge/assets/js/19.76269015.js"><link rel="prefetch" href="/knowledge/assets/js/2.af5e1f40.js"><link rel="prefetch" href="/knowledge/assets/js/20.f0beefb9.js"><link rel="prefetch" href="/knowledge/assets/js/21.49d454bd.js"><link rel="prefetch" href="/knowledge/assets/js/22.dbc392f8.js"><link rel="prefetch" href="/knowledge/assets/js/23.3f0ca45f.js"><link rel="prefetch" href="/knowledge/assets/js/24.44f75a62.js"><link rel="prefetch" href="/knowledge/assets/js/25.07fd2c6a.js"><link rel="prefetch" href="/knowledge/assets/js/26.a538fcf4.js"><link rel="prefetch" href="/knowledge/assets/js/27.dd50352e.js"><link rel="prefetch" href="/knowledge/assets/js/28.07194d7d.js"><link rel="prefetch" href="/knowledge/assets/js/29.4a5cb597.js"><link rel="prefetch" href="/knowledge/assets/js/3.7cd1bbf5.js"><link rel="prefetch" href="/knowledge/assets/js/30.b22a2e82.js"><link rel="prefetch" href="/knowledge/assets/js/31.e8923963.js"><link rel="prefetch" href="/knowledge/assets/js/32.4fb9356c.js"><link rel="prefetch" href="/knowledge/assets/js/33.1c9e807a.js"><link rel="prefetch" href="/knowledge/assets/js/35.261baf83.js"><link rel="prefetch" href="/knowledge/assets/js/36.b86e0662.js"><link rel="prefetch" href="/knowledge/assets/js/37.a49f45f5.js"><link rel="prefetch" href="/knowledge/assets/js/38.2c928e95.js"><link rel="prefetch" href="/knowledge/assets/js/39.b3440ac7.js"><link rel="prefetch" href="/knowledge/assets/js/4.9046eb02.js"><link rel="prefetch" href="/knowledge/assets/js/40.6d29f8af.js"><link rel="prefetch" href="/knowledge/assets/js/41.1db61fc9.js"><link rel="prefetch" href="/knowledge/assets/js/42.ff223464.js"><link rel="prefetch" href="/knowledge/assets/js/43.38cce5d9.js"><link rel="prefetch" href="/knowledge/assets/js/44.e40d25ff.js"><link rel="prefetch" href="/knowledge/assets/js/45.1af493d1.js"><link rel="prefetch" href="/knowledge/assets/js/46.bd3521ea.js"><link rel="prefetch" href="/knowledge/assets/js/47.53704bce.js"><link rel="prefetch" href="/knowledge/assets/js/48.65ac1a0d.js"><link rel="prefetch" href="/knowledge/assets/js/49.63af183e.js"><link rel="prefetch" href="/knowledge/assets/js/5.484eca69.js"><link rel="prefetch" href="/knowledge/assets/js/50.4a94ed49.js"><link rel="prefetch" href="/knowledge/assets/js/51.3b811165.js"><link rel="prefetch" href="/knowledge/assets/js/52.094ce301.js"><link rel="prefetch" href="/knowledge/assets/js/53.f151cc9b.js"><link rel="prefetch" href="/knowledge/assets/js/54.63d72898.js"><link rel="prefetch" href="/knowledge/assets/js/55.6d675bc7.js"><link rel="prefetch" href="/knowledge/assets/js/56.e3c69b94.js"><link rel="prefetch" href="/knowledge/assets/js/57.df33cce4.js"><link rel="prefetch" href="/knowledge/assets/js/58.f4062866.js"><link rel="prefetch" href="/knowledge/assets/js/59.24391e53.js"><link rel="prefetch" href="/knowledge/assets/js/6.e04b7d46.js"><link rel="prefetch" href="/knowledge/assets/js/60.d54f7240.js"><link rel="prefetch" href="/knowledge/assets/js/61.ef9a9525.js"><link rel="prefetch" href="/knowledge/assets/js/62.3eb51c2b.js"><link rel="prefetch" href="/knowledge/assets/js/63.02f209f2.js"><link rel="prefetch" href="/knowledge/assets/js/64.8195c5a6.js"><link rel="prefetch" href="/knowledge/assets/js/65.10ed2d32.js"><link rel="prefetch" href="/knowledge/assets/js/66.927bb1c0.js"><link rel="prefetch" href="/knowledge/assets/js/67.c4147b68.js"><link rel="prefetch" href="/knowledge/assets/js/68.2da21251.js"><link rel="prefetch" href="/knowledge/assets/js/69.be1a5d72.js"><link rel="prefetch" href="/knowledge/assets/js/7.660053fe.js"><link rel="prefetch" href="/knowledge/assets/js/70.2d838cce.js"><link rel="prefetch" href="/knowledge/assets/js/71.ca5182a8.js"><link rel="prefetch" href="/knowledge/assets/js/72.0fbbd7da.js"><link rel="prefetch" href="/knowledge/assets/js/73.1c92d914.js"><link rel="prefetch" href="/knowledge/assets/js/74.a0b8f90a.js"><link rel="prefetch" href="/knowledge/assets/js/75.2b96f45f.js"><link rel="prefetch" href="/knowledge/assets/js/76.8a7ed686.js"><link rel="prefetch" href="/knowledge/assets/js/77.704cef8b.js"><link rel="prefetch" href="/knowledge/assets/js/78.5ea1748c.js"><link rel="prefetch" href="/knowledge/assets/js/79.e238b410.js"><link rel="prefetch" href="/knowledge/assets/js/8.2da7363e.js"><link rel="prefetch" href="/knowledge/assets/js/9.c14ae379.js">
    <link rel="stylesheet" href="/knowledge/assets/css/styles.e7eda342.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/knowledge/" class="home-link router-link-active"><!----><span class="site-name">
      Summary of front-end knowledge system
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/liweirose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更多
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/liweirose/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/liweirose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更多
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/liweirose/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Browser</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HTML</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScript</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScript ES6</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS Utils</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Interview</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/knowledge/app/Interview/Interview-html.html" class="sidebar-link">HTML</a></li><li><a href="/knowledge/app/Interview/Interview-css.html" class="sidebar-link">CSS</a></li><li><a href="/knowledge/app/Interview/Interview-javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/knowledge/app/Interview/Interview-network.html" class="sidebar-link">Network</a></li><li><a href="/knowledge/app/Interview/interview-browser.html" class="sidebar-link">Browser</a></li><li><a href="/knowledge/app/Interview/interview-framework.html" class="sidebar-link">Framework</a></li><li><a href="/knowledge/app/Interview/Interview-algorithm.html" class="sidebar-link">算法 相关</a></li><li><a href="/knowledge/app/Interview/Interview-data-structure.html" class="sidebar-link">数据结构</a></li><li><a href="/knowledge/app/Interview/interview-summary.html" class="sidebar-link">面试总结</a></li><li><a href="/knowledge/app/Interview/interview-performance.html" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Engineering</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Engineering Practice</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Underscore SourceCode Parsing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Lodash SourceCode Parsing</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="性能优化"><a href="#性能优化" aria-hidden="true" class="header-anchor">#</a> 性能优化</h1><h3 id="性能优化是什么"><a href="#性能优化是什么" aria-hidden="true" class="header-anchor">#</a> 性能优化是什么</h3><p>从前端的角度来说，性能优化可以分为两个方向。从用户角度来看，一个是页面加载的很快，另一个是页面使用起来很流畅。因此，对性能优化的探索，我们可以分为页面加载时间跟页面运行效率两个方向来进行研究.</p><h3 id="从浏览器打开到页面渲染完成，花费了多少时间"><a href="#从浏览器打开到页面渲染完成，花费了多少时间" aria-hidden="true" class="header-anchor">#</a> 从浏览器打开到页面渲染完成，花费了多少时间</h3><p>是的，这个问题有点熟悉，面试官比较常问的是从浏览器打开到页面渲染完成，发生了什么事情。这个问题网上很多回答，我也不就重复的细说了。主要的过程是：</p><p>浏览器解析-&gt;查询缓存-&gt;dns查询-&gt;建立链接-&gt;服务器处理请求-&gt;服务器发送响应-&gt;客户端收到页面-&gt;解析HTML-&gt;构建渲染树-&gt;开始显示内容(白屏时间)-&gt;首屏内容加载完成(首屏时间)-&gt;用户可交互(DOMContentLoaded)-&gt;加载完成(load)</p><p>很显然，如果我们要进行加载时间的优化，我们需要从这里的每一个步骤都去思考，去总结，而避免东凑一点，西凑一点。</p><h3 id="页面加载时间监控"><a href="#页面加载时间监控" aria-hidden="true" class="header-anchor">#</a> 页面加载时间监控</h3><p>有一句话说得好，If You Can't Measure It, You Can't Manage It。在对这些环节进行优化之前，我们需要知道如何监控这些环节花费了多少时间。</p><p>首先推荐一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming" target="_blank" rel="noopener noreferrer">PerformanceTiming<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,可以获取到很多页面加载相关的数据。</p><p>比较常用的有:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">DNS</span>解析时间： domainLookupEnd <span class="token operator">-</span> domainLookupStart
<span class="token constant">TCP</span>建立连接时间： connectEnd <span class="token operator">-</span> connectStart
白屏时间： responseStart <span class="token operator">-</span> navigationStart
dom渲染完成时间： domContentLoadedEventEnd <span class="token operator">-</span> navigationStart
页面onload时间： loadEventEnd <span class="token operator">-</span> navigationStart
</code></pre></div><p>如果不使用该API，可以以服务器渲染返回的时间，或是SPA路由跳转离开的时间为起点，domContentLoaded，load等事件为结束点进行记录。或是直接上google analytics。方法很多，就不细说了。</p><h3 id="项目做过哪些性能优化？"><a href="#项目做过哪些性能优化？" aria-hidden="true" class="header-anchor">#</a> 项目做过哪些性能优化？</h3><ul><li>减少 HTTP 请求数</li><li>减少 DNS 查询</li><li>使用 CDN</li><li>避免重定向</li><li>图片懒加载</li><li>减少 DOM 元素数量</li><li>减少 DOM 操作</li><li>使用外部 JavaScript 和 CSS</li><li>压缩 JavaScript 、 CSS 、字体、图片等</li><li>优化 CSS Sprite</li><li>使用 iconfont</li><li>字体裁剪</li><li>多域名分发划分内容到不同域名</li><li>尽量减少 iframe 使用</li><li>避免图片 src 为空</li><li>把样式表放在  中</li><li>把脚本放在页面底部</li></ul><h3 id="你对优化这块了解多少"><a href="#你对优化这块了解多少" aria-hidden="true" class="header-anchor">#</a> 你对优化这块了解多少?</h3><ul><li>比如从客户端着手的:</li><li>压缩代码(JS/CSS),压缩图片</li><li>合并一些小图片(css sprite)</li><li>若是打包的代码尽可能切割成多个 chunk,减少单一 chunk过大</li><li>静态文件采用 cdn 引入</li><li>HTTP的缓存头使用的合理</li><li>减小第三方库的依赖</li><li>对于代码应该考虑性能来编写,比如使用requestAnimationFrame绘制动画,尽可能减少页面重绘(DOM 改变)</li><li>渐进升级,引入preload这些预加载资源</li><li>看情况用service worker来缓存资源(比如移动端打算搞 PWA)</li></ul><h3 id="前端需要注意哪些seo"><a href="#前端需要注意哪些seo" aria-hidden="true" class="header-anchor">#</a> 前端需要注意哪些SEO</h3><ul><li><p>合理的title、description、keywords：搜索对着三项的权重逐个减小，title值强调重点即可，重要关键词出现不要超过2次，而且要靠前，不同页面title要有所不同；</p></li><li><p>description把页面内容高度概括，长度合适，不可过分堆砌关键词，不同页面description有所不同；keywords列举出重要关键词即可</p></li><li><p>语义化的HTML代码，符合W3C规范：语义化代码让搜索引擎容易理解网页</p></li><li><p>重要内容HTML代码放在最前：搜索引擎抓取HTML顺序是从上到下，有的搜索引擎对抓取长度有限制，保证重要内容一定会被抓取</p></li><li><p>重要内容不要用js输出：爬虫不会执行js获取内容</p></li><li><p>少用iframe：搜索引擎不会抓取iframe中的内容</p></li><li><p>非装饰性图片必须加alt</p></li><li><p>提高网站速度：网站速度是搜索引擎排序的一个重要指标</p></li></ul><h3 id="谈谈你对重构的理解"><a href="#谈谈你对重构的理解" aria-hidden="true" class="header-anchor">#</a> 谈谈你对重构的理解</h3><ul><li><p>网站重构：在不改变外部行为的前提下，简化结构、添加可读性，而在网站前端保持一致的行为。也就是说是在不改变UI的情况下，对网站进行优化， 在扩展的同时保持一致的UI</p></li><li><p>对于传统的网站来说重构通常是：</p><ul><li>表格(table)布局改为DIV+CSS</li><li>使网站前端兼容于现代浏览器(针对于不合规范的CSS、如对IE6有效的)</li><li>对于移动平台的优化</li><li>针对于SEO进行优化</li></ul></li></ul><h3 id="平时如何管理你的项目？"><a href="#平时如何管理你的项目？" aria-hidden="true" class="header-anchor">#</a> 平时如何管理你的项目？</h3><ul><li>先期团队必须确定好全局样式（globe.css），编码模式(utf-8) 等；</li><li>编写习惯必须一致（例如都是采用继承式的写法，单样式都写成一行）；</li><li>标注样式编写人，各模块都及时标注（标注关键样式调用的地方）；</li><li>页面进行标注（例如 页面 模块 开始和结束）；</li><li>CSS跟HTML 分文件夹并行存放，命名都得统一（例如style.css）；</li><li>JS 分文件夹存放 命名以该JS功能为准的英文翻译。</li><li>图片采用整合的 images.png png8 格式文件使用 - 尽量整合在一起使用方便将来的管理</li></ul><h3 id="强类型检查"><a href="#强类型检查" aria-hidden="true" class="header-anchor">#</a> 强类型检查</h3><ul><li>用===代替 ==</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果处理不当，它会极大地影响程序逻辑。这就像，你想向左走，但由于某种原因，你向右走</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token comment">// true</span>
<span class="token number">0</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token comment">// false</span>
<span class="token number">2</span> <span class="token operator">==</span> <span class="token string">&quot;2&quot;</span> <span class="token comment">// true</span>
<span class="token number">2</span> <span class="token operator">===</span> <span class="token string">&quot;2&quot;</span> <span class="token comment">// false</span>

<span class="token comment">// 例子</span>
<span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 条件不成立，不会进入</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 条件成立，会进入</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h3><p>用知名其意的方式为变量命名，通过这种方式，当一个人看到它们时，易于搜索和理解。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> daysSLV <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> ok<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ok <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-s extra-class"><pre class="language-text"><code>const MAX_AGE = 30;
let daysSinceLastVisit = 10;
let currentYear = new Date().getFullYear();

...

const isUserOlderThanAllowed = user.age &gt; MAX_AGE;
</code></pre></div><p>不要在变量名中添加额外的不需要的单词。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> nameValue<span class="token punctuation">;</span>
<span class="token keyword">let</span> theProduct<span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name<span class="token punctuation">;</span>
<span class="token keyword">let</span> product<span class="token punctuation">;</span>
</code></pre></div><p>不要简写变量上下文。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Peter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">u</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// 当上面代码很多的时候 ，这 `u` 是什么鬼</span>
  <span class="token function">register</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Peter&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ...</span>
  <span class="token function">register</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>不要添加不必要的上下文。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  userName<span class="token punctuation">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  userSurname<span class="token punctuation">:</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span>
  userAge<span class="token punctuation">:</span> <span class="token string">&quot;28&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

user<span class="token punctuation">.</span>userName<span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  surname<span class="token punctuation">:</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token string">&quot;28&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

user<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre></div><h3 id="函数"><a href="#函数" aria-hidden="true" class="header-anchor">#</a> 函数</h3><p>使用长而具有描述性的名称。 考虑到函数表示某种行为，函数名称应该是动词或短​​语，用以说明其背后的意图以及参数的意图。 函数的名字应该说明他们做了什么。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">notif</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">notifyUser</span><span class="token punctuation">(</span><span class="token parameter">emailAddress</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>
</code></pre></div><p>避免使用大量参数。 理想情况下，函数应该指定两个或更少的参数。 参数越少，测试函数就越容易，参数多的情况可以使用对象。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token parameter">fields<span class="token punctuation">,</span> fromDate<span class="token punctuation">,</span> toDate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> fields<span class="token punctuation">,</span> fromDate<span class="token punctuation">,</span> toDate <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>

<span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'surname'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  fromDate<span class="token punctuation">:</span> <span class="token string">'2019-01-01'</span><span class="token punctuation">,</span>
  toDate<span class="token punctuation">:</span> <span class="token string">'2019-01-18'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用默认参数替代 || 操作</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createShape</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> shapeType <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createShape</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一个函数应该只做一件事，不要在一个函数中执行多个操作。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">notifyUsers</span><span class="token punctuation">(</span><span class="token parameter">users</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userRecord <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userRecord<span class="token punctuation">.</span><span class="token function">isVerified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">notify</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">notifyVerifiedUsers</span><span class="token punctuation">(</span><span class="token parameter">users</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isUserVerified<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>notify<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isUserVerified</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userRecord <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> userRecord<span class="token punctuation">.</span><span class="token function">isVerified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用Object.assign设置对象默认值。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> shapeConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createShape</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span>type <span class="token operator">=</span> config<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>width <span class="token operator">=</span> config<span class="token punctuation">.</span>width <span class="token operator">||</span> <span class="token number">250</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>height <span class="token operator">=</span> config<span class="token punctuation">.</span>height<span class="token operator">||</span> <span class="token number">250</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token function">createShape</span><span class="token punctuation">(</span>shapeConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> shapeConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> <span class="token number">200</span>
  <span class="token comment">// Exclude the 'height' key</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createShape</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">&quot;cube&quot;</span><span class="token punctuation">,</span>
      width<span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span>
      height<span class="token punctuation">:</span> <span class="token number">250</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    config
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token function">createShape</span><span class="token punctuation">(</span>shapeConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>不要使用标志作为参数，因为它们告诉函数做的比它应该做的多。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> isPublic</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isPublic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./public/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createPublicFile</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./public/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不要污染全局变量。 如果需要扩展现有对象，请使用ES类和继承，而不是在原生对象的原型链上创建函数。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SuperArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// implementation</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="条件"><a href="#条件" aria-hidden="true" class="header-anchor">#</a> 条件</h3><p>避免使用反面条件。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isUserNotBlocked</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isUserNotBlocked</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isUserBlocked</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUserBlocked</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用条件简写。这可能微不足道，但值得一提。仅对布尔值使用此方法，并且如果你确信该值不会是undefined 或null的，则使用此方法。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isValid <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something...</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>isValid <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something...</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>尽可能避免条件句，而是使用多态性和继承。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getMaximumSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Ford&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anotherFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Mazda&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;McLaren&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anotherFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Ford</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getMaximumSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anotherFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Mazda</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getMaximumSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">McLaren</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">getMaximumSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">anotherFactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="类"><a href="#类" aria-hidden="true" class="header-anchor">#</a> 类</h3><p>class 是JavaScript中新的语法糖。一切工作就像以前的原型，只是它现在看起来不同，你应该更喜欢他们比ES5普通功能。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Instantiate Person with `new` keyword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/**/</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> school</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Instantiate Student with `new` keyword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>school <span class="token operator">=</span> school<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">printSchoolName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">printSchoolName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/**/</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> school</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>school <span class="token operator">=</span> school<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">printSchoolName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用链接。许多库(如jQuery和Lodash)都使用这种模式。在类中，只需在每个函数的末尾返回this就可以将更多的该类方法链接到它上。</p><ul><li>不好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setSurname</span><span class="token punctuation">(</span><span class="token parameter">surname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>surname <span class="token operator">=</span> surname<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">setSurname</span><span class="token punctuation">(</span><span class="token string">&quot;Doe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>好的方式：</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setSurname</span><span class="token punctuation">(</span><span class="token parameter">surname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>surname <span class="token operator">=</span> surname<span class="token punctuation">;</span>
    <span class="token comment">// Return this for chaining</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token comment">// Return this for chaining</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Return this for chaining</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setSurname</span><span class="token punctuation">(</span><span class="token string">&quot;Doe&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/liweirose/knowledge/edit/master/docs/app/Interview/interview-performance.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">6/14/2019, 3:17:07 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/knowledge/app/Interview/interview-summary.html" class="prev">
          面试总结
        </a></span><span class="next"><a href="/knowledge/app/Engineering/Engineering-webpack.html">
          Webpack
        </a> →
      </span></p></div></div></div></div>
    <script src="/knowledge/assets/js/app.e7eda342.js" defer></script><script src="/knowledge/assets/js/34.a4d1a95b.js" defer></script>
  </body>
</html>
